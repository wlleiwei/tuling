# 一条SQL的执行过程

连接器：连接管理和权限认证

- socket建立通信
- user表查用户信息：host+pwd（IP和密码验证）校验成功以后连接建立成功
- 建立成功以后为每个会话在内存中维护一个session空间，保存连接的信息，并且会把用户的信息（权限信息）保存在session中，原因是：用户每次执行的SQL都会验证是否有权限，如果每次都从表中查数据速度慢，因此会直接把权限信息直接保存在session中
- 在更改mysql user表中的用户权限时，只有下次建立新的连接的时候才会生效，已经连接上的用户不受影响，原因是：如果在改user表用户权限的时候来更新session中用户的权限信息，此时如果该用户用大量的SQL需要执行，这些SQL都会被堵塞，只有权限信息更新完之后才可以正常处理SQL请求，会造成mysql假死现象，严重影响mysql的运行效率。



